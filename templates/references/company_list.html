<!-- templates/references/companies.html -->

{% extends 'base.html' %}

{% load static %}
{% load i18n %}
{% load countries %}

{% block CSS %}
    <link rel="stylesheet" href="{% static 'flags/sprite-hq.css' %}">
    <!-- DataTables -->
    <link rel="stylesheet" href="{% static 'bower_components/datatables/datatables.min.css' %}">
{% endblock CSS %}

{% block pageheader %}
    {% trans "Компанії" %}
{% endblock pageheader %}

{% block breadcrumb %}
    <li class="active">{% trans "Компанії" %}</li>
{% endblock breadcrumb %}

{% block content %}
    <div class="box box-success">
        <div class="box-header">
            <i class="fa fa-share-alt"></i>
            <h3 class="box-title">{% trans "Перелік компаній" %}</h3>
            <div class="box-tools pull-right" data-toggle="tooltip" title="">
                <div class="btn-group">
                    <a class="btn"
                        href="{% url 'company_list' %}"
                        title={% trans 'Оновити' %}>
                        <i class="fa fa-refresh"></i>
                    </a>
                    <a class="btn"
                        href="{% url 'company_create' %}"
                        title={% trans 'Створити' %}>
                        <i class="fa fa-plus"></i>
                    </a>
                </div>
            </div>
        </div>
        <div class="box-body">
            <table id="example2" class="table table-bordered table-hover table-striped">
                <thead>
                    <tr>
                        <th data-priority="2">{% trans "Назва" %}</th>
                        <th data-priority="3">{% trans "ЄДРПОУ" %}</th>
                        <th>{% trans "ІПН" %}</th>
                        <th>{% trans "Адреса" %}</th>
                        <th>{% trans "Країна" %}</th>
                        <th data-priority="1"></th>
                    </tr>
                </thead>
                <tbody>
                    {% for company in companies %}
                        {% get_country company.country as country %}
                        <tr>
                            <td>{{ company.name }}</td>
                            <td>{{ company.code }}</td>
                            <td>{{ company.tax }}</td>
                            <td>{{ company.address }}</td>
                            <td><i class="{{ country.flag_css }}"></i></td>
                            <td>
                                <div class="btn-group">
                                    <a class="btn"
                                        href="{% url 'company_update' pk=company.pk %}"
                                        title={% trans 'Редагувати' %}>
                                        <span style="color: green;">
                                            <i class="fa fa-edit"></i>
                                        </span>
                                    </a>
                                    <a class="btn"
                                        href="{% url 'company_delete' pk=company.pk %}"
                                        title={% trans 'Видалити' %}>
                                        <span style="color: red;">
                                            <i class="fa fa-trash"></i>
                                        </span>
                                    </a>
                                </div>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}

{% block JS %}
    <!-- DataTable -->
    <script src="{% static 'bower_components/datatables/datatables.min.js' %}"></script>
    <script>
        $(document).ready(function () {
            $('#example2').DataTable({
                'language': {
                    "lengthMenu": "Відобразити _MENU_ записів на сторінку",
                    "zeroRecords": "Нічого не знайдено - вибачте",
                    "info": "Сторінка _PAGE_ з _PAGES_",
                    "infoEmpty": "Записи відсутні",
                    "infoFiltered": "(відфільтровано з _MAX_ записів)",
                    "search": "Пошук:",
                    "paginate": {
                        "first":      "Перша",
                        "last":       "Остання",
                        "next":       "Наступна",
                        "previous":   "Попередня"
                    },
                },
                'paging'      : true,
                'lengthChange': true,
                'searching'   : true,
                'ordering'    : true,
                'info'        : true,
                'autoWidth'   : false,
                'responsive'  : true
            })
        })
    </script>
{% endblock JS %}


